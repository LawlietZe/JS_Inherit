摘自：[从 0 到 1 再到 100：搭建、编写、构建一个前端项目](https://mp.weixin.qq.com/s/1gQE3FV4p3NBGpQvh41ryQ)  

### 1. 选择现成的项目模板还是自己搭建项目骨架  

搭建一个前端项目的方式有两种：选择现成的项目模板、自己搭建项目骨架。

选择一个现成项目模板是搭建一个项目最快的方式，模板已经把基本的骨架都搭建好了，你只需要向里面填充具体的业务代码，就可以通过内置的工具与命令构建代码、部署到服务器等。

一般来说，一个现成的项目模板会预定义一定的目录结构、书写方式，在编写项目代码时需要遵循相应的规范；也会内置必要的工具，比如 .editorconfig、eslint、stylelint、prettier、husky、lint-staged 等；也会内置必要的命令（ package.json|scripts），比如 本地开发：npm run dev、 本地预览：npm run start、 构建：npm run build、 部署：npm run deploy 等。

社区比较好的项目模板：  
react-boilerplate

ant-design-pro

vue-element-admin

react-starter-kit

create-react-app

如果你需要定制化，可以选择自己搭建项目的骨架，但这需要开发者对构建工具如 webpack、npm、node 及其生态等有相当的了解与应用，才能完美的把控整个项目。  

### 2. 选择合适的规范来写代码   

js 模块化的发展大致有这样一个过程 iife => commonjs/amd => es6，而在这几个规范中：
iife: js 原生支持，但一般不会直接使用这种规范写代码  
amd: requirejs 定义的加载规范，但随着构建工具的出现，便一般不会用这种规范写代码  
commonjs: node 的模块加载规范，一般会用这种规范写 node   
es6: ECMAScript2015 定义的模块加载规范，需要转码后浏览器才能运行  
这里推荐使用 es6 的模块化规范来写代码，然后用工具转换成 es5 的代码，并且 es6 的代码可以使用 Tree shaking 功能。  

### 3. 选择合适的构建工具
对于前端项目来说，构建工具一般都选用 webpack，webpack 提供了强大的功能和配置化运行。如果你不喜欢复杂的配置，可以尝试 parcel。

### 4. 确定是单页面应用（SPA）还是多页面应用
单页面应用（single page application），就是只有一个页面的应用，页面的刷新和内部子页面的跳转完全由 js 来控制。

一般单页面应用都有以下几个特点：

本地路由，由 js 定义路由、根据路由渲染页面、控制页面的跳转
所有文件只会加载一次，最大限度重用文件，并且极大提升加载速度
按需加载，只有真正使用到页面的时候，才加载相应的文件
这种方式的应用，项目里只有一个入口文件，便无需封装。

### 5. 选择合适的前端框架与 UI 库

一般在搭建项目的时候就需要定下前端框架与 UI 库，因为如果后期想更换前端框架和 UI 库，代价是很大的。

比较现代化的前端框架：

react  
vue  
angular  
一些不错的组合：

jquery + bootstrap：比较经典的
react + ant-design、material-ui、Semantic-UI：react 的组合
vue + element、iview、vux、mint-ui：vue 的组合

### 6. 定好目录结构

一个好的目录结构对一个好的项目而言是非常必要的。

一个好的目录结构应当具有以下的一些特点：

解耦：代码尽量去耦合，这样代码逻辑清晰，也容易扩展
分块：按照功能对代码进行分块、分组，并能快捷的添加分块、分组
编辑器友好：需要更新功能时，可以很快的定位到相关文件，并且这些文件应该是很靠近的，而不至于到处找文件
比较推荐的目录结构：  

多页面应用



```
|-- src/ 源代码目录

    |-- page1/ page1 页面的工作空间（与这个页面相关的文件都放在这个目录下）
        |-- index.html html 入口文件
        |-- index.js js 入口文件
        |-- index.(css|less|scss) 样式入口文件
        |-- html/ html 片段目录
        |-- (css|less|scss)/ 样式文件目录
        |-- mock/ 本地 json 数据模拟
        |-- images/ 图片文件目录
        |-- components/ 组件目录（如果基于 react, vue 等组件化框架）
        |-- ...
        
    |-- sub-dir/ 子目录
        |-- page2/ page2 页面的工作空间（内部结构参考 page1）
            |-- ...
        
    |-- ...
    
|-- html/ 公共 html 片段
|-- less/ 公共 less 目录
|-- components/ 公共组件目录
|-- images/ 公共图片目录
|-- mock/ 公共 api-mock 文件目录
|-- ...
```
单页面应用
```
|-- src/ 源代码目录
    |-- page1/ page1 页面的工作空间
        |-- index.js 入口文件
        |-- services/ service 目录
        |-- models/ model 目录
        |-- mock/ 本地 json 数据模拟
        |-- images/ 图片文件目录
        |-- components/ 组件目录（如果基于 react, vue 等组件化框架）
        |-- ...
        
    |-- module1/ 子目录
        |-- page2/ page2 页面的工作空间（内部结构参考 page1）
        
    |-- ...
    
|-- images/ 公共图片目录
|-- mock/ 公共 api-mock 文件目录
|-- components/ 公共组件目录   
|-- ... 
```
### 7. 搭建一个好的脚手架
[参考项目配置](https://segmentfault.com/a/1190000016481132)  

### 8. 使用版本控制系统管理源代码（git）

### 9. 编写代码

### 10. 组件化

### 11. 测试  
测试的目的在于能以最少的人力和时间发现潜在的各种错误和缺陷，这在项目更新、重构等的过程中尤其重要，因为每当更改一些代码后，你并不知道这些代码有没有问题、会不会影响其他的模块。如果有了测试，运行一遍测试用例，就知道更改的代码有没有问题、会不会产生影响。

一般前端测试分以下几种：

单元测试：模块单元、函数单元、组件单元等的单元块的测试
集成测试：接口依赖（ajax）、I/O 依赖、环境依赖（localStorage、IndexedDB）等的上下文的集成测试
样式测试：对样式的测试
E2E 测试：端到端测试，也就是在实际生产环境测试整个应用
一般会用到下面的一些工具：

jest
enzyme
cypress
selenium
puppeteer


### 12. 构建
一般单页面应用的构建会有 npm run build 的命令来构建项目，然后会输出一个 html 文件，一些 js/css/images ... 文件，然后把这些文件部署到服务器就可以了。

多页面应用的构建要复杂一些，因为是多入口的，所以一般会封装构建工具，然后通过参数传入多个入口：

npm run build -- page1 page2 dir1/* dir2/all --env test/prod

### 13. 部署
在构建好项目之后，就可以部署到服务器了。

传统的方式，可以用 ftp, sftp 等工具，手动传到服务器，但这种方式比较笨拙，不够自动化。

自动化的，可以用一些工具部署到服务器，如 gulp、gulp-ssh，当然也可以用一些封装的工具，如 md-sync、lila 等

### 14. 持续集成测试、构建、部署

### 15. 清理服务器上过期文件
现在前端的项目基本上都会用 webpack 打包代码，并且文件名（html 文件除外）都是 hash 化的，如果需要清除过期的文件而又不想把服务器上文件全部删掉然后重新构建、部署，可以使用 sclean 来清除过期文件。



### 16. 收集前端错误反馈

